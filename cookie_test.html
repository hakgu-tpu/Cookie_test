<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HttpOnly 쿠키 동작 테스트</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🍪 HttpOnly 쿠키 동작 테스트</h1>
            <p>Refresh Token의 실제 동작 방식을 PoC로 확인해보세요</p>
        </div>

        <div class="content">
            <div class="info-box">
                <h3>📋 테스트 시나리오</h3>
                <ul>
                    <li><strong>HttpOnly 쿠키</strong>는 JavaScript로 접근할 수 없지만, HTTP 요청 시 자동으로 전송됩니다</li>
                    <li>브라우저가 자동으로 관리하므로 <strong>"원할 때마다"</strong>가 아닌 <strong>"항상 자동"</strong>으로 전송됩니다</li>
                    <li>개발자 도구의 <strong>Network 탭</strong>에서 실제 전송 여부를 확인할 수 있습니다</li>
                    <li>Application 탭의 Cookies에서 저장된 쿠키를 확인할 수 있습니다</li>
                </ul>
            </div>

            <!-- 1. 쿠키 설정 테스트 -->
            <div class="test-section">
                <h2>1️⃣ 쿠키 설정하기</h2>
                <p>HttpOnly Refresh Token과 일반 쿠키를 설정합니다.</p>
                
                <div class="button-group">
                    <button class="btn btn-primary" onclick="setRefreshToken()">
                        🍪 Refresh Token 설정
                    </button>
                    <button class="btn btn-warning" onclick="clearCookies()">
                        🗑️ 모든 쿠키 삭제
                    </button>
                </div>

                <div class="cookie-status" id="cookieStatus">
                    <div class="cookie-card" id="refreshTokenCard">
                        <h4>🔒 Refresh Token (HttpOnly)</h4>
                        <p id="refreshTokenStatus">설정되지 않음</p>
                    </div>
                    <div class="cookie-card" id="normalTokenCard">
                        <h4>🔓 Normal Token (일반)</h4>
                        <p id="normalTokenStatus">설정되지 않음</p>
                    </div>
                </div>
            </div>

            <!-- 2. JavaScript 접근 테스트 -->
            <div class="test-section">
                <h2>2️⃣ JavaScript 접근 테스트</h2>
                <p>HttpOnly 쿠키는 JavaScript로 접근할 수 없음을 확인합니다.</p>
                
                <div class="button-group">
                    <button class="btn btn-primary" onclick="testJavaScriptAccess()">
                        🔍 JavaScript로 쿠키 접근 시도
                    </button>
                </div>

                <div class="result-area" id="jsAccessResult">
테스트 결과가 여기에 표시됩니다...
                </div>
            </div>

            <!-- 3. 자동 전송 테스트 -->
            <div class="test-section">
                <h2>3️⃣ HTTP 요청 시 자동 전송 테스트</h2>
                <p>모든 HTTP 요청에 HttpOnly 쿠키가 자동으로 포함되는지 확인합니다.</p>
                
                <div class="button-group">
                    <button class="btn btn-success" onclick="checkCookies()">
                        📨 쿠키 전송 확인
                    </button>
                    <button class="btn btn-success" onclick="testRefreshToken()">
                        🔄 토큰 갱신 테스트
                    </button>
                    <button class="btn btn-warning" onclick="testMultipleRequests()">
                        🔄 연속 요청 테스트
                    </button>
                </div>

                <div class="result-area" id="httpResult">
HTTP 테스트 결과가 여기에 표시됩니다...
                </div>
            </div>

            <!-- 4. 개발자 도구 안내 -->
            <div class="info-box">
                <h3>🛠️ 개발자 도구로 확인하기</h3>
                <ul>
                    <li><strong>F12</strong>를 눌러 개발자 도구를 열어주세요</li>
                    <li><strong>Application 탭 → Storage → Cookies</strong>에서 저장된 쿠키 확인</li>
                    <li><strong>Network 탭</strong>에서 HTTP 요청 시 Cookie 헤더 확인</li>
                    <li>HttpOnly 쿠키는 JavaScript로 읽을 수 없지만 <strong>자동으로 전송</strong>됩니다</li>
                </ul>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>